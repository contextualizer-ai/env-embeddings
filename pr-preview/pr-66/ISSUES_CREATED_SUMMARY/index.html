
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://contextualizerai.github.io/env-embeddings/ISSUES_CREATED_SUMMARY/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>GitHub Issues Created - Random Forest Enhancement Roadmap - env-embeddings</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#github-issues-created-random-forest-enhancement-roadmap" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="env-embeddings" class="md-header__button md-logo" aria-label="env-embeddings" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            env-embeddings
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GitHub Issues Created - Random Forest Enhancement Roadmap
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/contextualizerai/env-embeddings" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="env-embeddings" class="md-nav__button md-logo" aria-label="env-embeddings" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    env-embeddings
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/contextualizerai/env-embeddings" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#issues-created" class="md-nav__link">
    <span class="md-ellipsis">
      Issues Created
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Issues Created">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#priority-high" class="md-nav__link">
    <span class="md-ellipsis">
      Priority: HIGH
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Priority: HIGH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-54-handle-duplicate-coordinates-with-samedifferent-envo-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #54: Handle duplicate coordinates with same/different ENVO annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-51-implement-ontology-aware-evaluation-metrics-partial-credit" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #51: Implement ontology-aware evaluation metrics (partial credit)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-medium-high" class="md-nav__link">
    <span class="md-ellipsis">
      Priority: MEDIUM-HIGH
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Priority: MEDIUM-HIGH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-56-compare-rf-predictions-to-k-nn-baseline" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #56: Compare RF predictions to k-NN baseline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-medium" class="md-nav__link">
    <span class="md-ellipsis">
      Priority: MEDIUM
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Priority: MEDIUM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-52-multi-output-random-forest-for-joint-triad-prediction" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #52: Multi-output Random Forest for joint triad prediction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-53-analyze-ge-feature-importance-across-triad-scales" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #53: Analyze GE feature importance across triad scales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-55-scale-rf-training-to-ncbi-complete-382955-samples" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #55: Scale RF training to NCBI complete (382,955 samples)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-57-document-envo-term-coverage-and-class-distribution" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #57: Document ENVO term coverage and class distribution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-graph" class="md-nav__link">
    <span class="md-ellipsis">
      Dependency Graph
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-roadmap" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Roadmap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Roadmap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-clean-foundation-current-pr-50" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 1: Clean Foundation (Current PR #50)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-enhanced-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 2: Enhanced Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-advanced-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 3: Advanced Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-production-scale" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 4: Production Scale
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Summary Statistics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-questions-for-discussion" class="md-nav__link">
    <span class="md-ellipsis">
      Open Questions for Discussion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="github-issues-created-random-forest-enhancement-roadmap">GitHub Issues Created - Random Forest Enhancement Roadmap</h1>
<h2 id="summary">Summary</h2>
<p>Created <strong>7 new issues</strong> to address missing functionality and important considerations for Random Forest ENVO prediction.</p>
<h2 id="issues-created">Issues Created</h2>
<h3 id="priority-high">Priority: HIGH</h3>
<h4 id="issue-54-handle-duplicate-coordinates-with-samedifferent-envo-annotations">Issue #54: Handle duplicate coordinates with same/different ENVO annotations</h4>
<p><strong>URL</strong>: https://github.com/contextualizer-ai/env-embeddings/issues/54</p>
<p><strong>Problem</strong>: Multiple samples with identical coordinates/dates → identical GE embeddings but potentially different ENVO annotations</p>
<p><strong>Impact</strong>:
- Creates impossible learning task (X → Y₁ AND X → Y₂)
- Inflates dataset via pseudo-replication
- Test set leakage if duplicates split across train/test</p>
<p><strong>Solutions proposed</strong>:
1. Deduplicate by coordinate (conservative)
2. Majority vote for conflicts
3. Weight duplicates lower
4. Flag and exclude conflicts only</p>
<p><strong>Recommendation</strong>: Start with deduplication for clean baseline (Option 1)</p>
<p><strong>Related to</strong>: #49 (needs this before RF training)</p>
<hr />
<h4 id="issue-51-implement-ontology-aware-evaluation-metrics-partial-credit">Issue #51: Implement ontology-aware evaluation metrics (partial credit)</h4>
<p><strong>URL</strong>: https://github.com/contextualizer-ai/env-embeddings/issues/51</p>
<p><strong>Problem</strong>: Binary exact match doesn't give credit for "close" predictions (e.g., predicting parent term)</p>
<p><strong>Example</strong>:</p>
<pre><code>True: ENVO:00000447 (marine biome)
Predicted: ENVO:00000428 (biome) [parent term]
Current score: 0.0
Better score: 0.75 (hierarchically close)
</code></pre>
<p><strong>Implementation</strong>:
- Use ENVO ontology graph (via <code>pronto</code> library)
- Hierarchy-based scoring: exact=1.0, parent/child=0.75, sibling=0.5, distant=0.25
- Semantic similarity scoring: Use ENVO embeddings cosine similarity
- New metrics: hierarchical_accuracy, semantic_accuracy, top_k_hierarchical</p>
<p><strong>Impact</strong>: More nuanced evaluation, distinguishes "close misses" from "completely wrong"</p>
<p><strong>Related to</strong>: #49 (improves evaluation), #31 (original classifier idea)</p>
<hr />
<h3 id="priority-medium-high">Priority: MEDIUM-HIGH</h3>
<h4 id="issue-56-compare-rf-predictions-to-k-nn-baseline">Issue #56: Compare RF predictions to k-NN baseline</h4>
<p><strong>URL</strong>: https://github.com/contextualizer-ai/env-embeddings/issues/56</p>
<p><strong>Question</strong>: Does supervised learning (RF) beat unsupervised baseline (k-NN)?</p>
<p><strong>k-NN baseline</strong> (already exists in similarity_analysis.ipynb):
- Find k=5 most GE-similar samples
- Majority vote their ENVO terms
- Simple, interpretable, no training</p>
<p><strong>Comparison metrics</strong>:
- Accuracy (exact match)
- Hierarchical accuracy (from #51)
- Prediction confidence
- Runtime (k-NN slow at inference)</p>
<p><strong>Expected outcome</strong>:
- If RF &gt;&gt; k-NN: ML justified
- If RF ≈ k-NN: Consider simpler k-NN approach
- If k-NN &gt; RF: GE embeddings designed for similarity, not classification</p>
<p><strong>Related to</strong>: #49 (RF baseline), #51 (evaluation), similarity_analysis.ipynb</p>
<hr />
<h3 id="priority-medium">Priority: MEDIUM</h3>
<h4 id="issue-52-multi-output-random-forest-for-joint-triad-prediction">Issue #52: Multi-output Random Forest for joint triad prediction</h4>
<p><strong>URL</strong>: https://github.com/contextualizer-ai/env-embeddings/issues/52</p>
<p><strong>Current approach</strong> (#49): 3 independent classifiers (broad, local, medium)</p>
<p><strong>Proposed</strong>: Predict all 3 scales jointly to exploit dependencies</p>
<p><strong>Approaches</strong>:
1. <strong>Multi-output RF</strong>: sklearn native, predicts all 3 simultaneously
2. <strong>Chained classifiers</strong>: Use predicted broad as feature for local/medium
3. <strong>Joint encoding</strong>: Treat triad as single categorical (huge class space)</p>
<p><strong>Research questions</strong>:
- Does joint prediction improve accuracy?
- Can we use hierarchical constraints? (e.g., marine broad → no desert local)
- Which triads are most/least predictable?</p>
<p><strong>Evaluation</strong>:
- Per-scale accuracy vs independent (#49 baseline)
- Triad-level accuracy (all 3 must match)
- Constraint violation analysis</p>
<p><strong>Related to</strong>: #49 (provides baseline for comparison)</p>
<hr />
<h4 id="issue-53-analyze-ge-feature-importance-across-triad-scales">Issue #53: Analyze GE feature importance across triad scales</h4>
<p><strong>URL</strong>: https://github.com/contextualizer-ai/env-embeddings/issues/53</p>
<p><strong>Question</strong>: Do different GE embedding dimensions predict different ENVO scales?</p>
<p><strong>Analysis</strong>:
1. Compare <code>feature_importances_</code> across 3 RF classifiers
2. Identify unique vs shared important features (Venn diagram)
3. Map GE dimensions to Earth Engine bands (blue, green, NIR, NDVI, etc.)
4. Test reduced feature sets (efficiency vs accuracy trade-off)</p>
<p><strong>Hypotheses</strong>:
- Broad scale: Coarse features (band means, overall NDVI)
- Local scale: Fine features (texture, variance, edges)
- Some universal features: NDVI for vegetation</p>
<p><strong>Deliverables</strong>:
- Side-by-side feature importance plots
- Correlation analysis between scales
- Physical interpretation (which bands matter?)
- Efficiency recommendation (64 dims or specialize?)</p>
<p><strong>Related to</strong>: #49 (provides feature_importances_), earth_engine.py</p>
<hr />
<h4 id="issue-55-scale-rf-training-to-ncbi-complete-382955-samples">Issue #55: Scale RF training to NCBI complete (382,955 samples)</h4>
<p><strong>URL</strong>: https://github.com/contextualizer-ai/env-embeddings/issues/55</p>
<p><strong>Goal</strong>: Test scalability on NCBI complete - <strong>47x larger</strong> than NMDC</p>
<p><strong>Challenges</strong>:
1. <strong>Execution time</strong>: Estimated 45-90 minutes (vs 2-3 min for NMDC)
2. <strong>Class imbalance</strong>: More diverse ENVO terms, many with 1-2 samples
3. <strong>Data quality</strong>: Uncurated, more noise than NMDC
4. <strong>Duplicates</strong>: Higher rate expected (Issue #54)</p>
<p><strong>Optimizations</strong>:
- Reduce trees: 100 → 50
- Subsample per tree: <code>max_samples=0.5</code>
- Skip cross-validation initially
- Progress monitoring: <code>verbose=2</code></p>
<p><strong>Cross-dataset evaluation</strong>:
- Train on NCBI, test on NMDC
- Train on NMDC, test on NCBI
- Does NMDC curation improve model quality?</p>
<p><strong>Expected results</strong>:
- NCBI accuracy: 45-50% (vs NMDC 50-55%)
- If NCBI &lt;&lt; NMDC: Too noisy for supervised learning
- Runtime: 20-30 minutes (optimized)</p>
<p><strong>Related to</strong>: #49 (NMDC baseline), #54 (duplicate handling), #46 (NCBI dataset)</p>
<hr />
<h4 id="issue-57-document-envo-term-coverage-and-class-distribution">Issue #57: Document ENVO term coverage and class distribution</h4>
<p><strong>URL</strong>: https://github.com/contextualizer-ai/env-embeddings/issues/57</p>
<p><strong>Goal</strong>: Understand what we can/can't predict based on data coverage</p>
<p><strong>Analysis</strong>:
1. <strong>Per-dataset statistics</strong>: Unique terms, class distribution, Gini coefficient
2. <strong>Cross-dataset comparison</strong>: Venn diagram of term overlap
3. <strong>ENVO ontology coverage</strong>: What % of 6000+ ENVO terms do we have?
4. <strong>Predictability analysis</strong>: Does sample count correlate with RF accuracy?</p>
<p><strong>Expected findings</strong>:
- NMDC: ~200-400 unique terms per scale, ~5-10% ENVO coverage
- NCBI: ~800-1500 unique terms, ~15-25% coverage, heavily skewed (Zipf's law)
- GOLD: ~300-500 terms</p>
<p><strong>Implications</strong>:
- Need <code>class_weight='balanced'</code> for skewed distributions
- Filter rare classes (&lt; 5 samples)
- Model only works for covered ENVO subset (closed-world)</p>
<p><strong>Deliverables</strong>:
- <code>notebooks/envo_coverage_analysis.ipynb</code>
- Class distribution visualizations (log scale histograms, Zipf plots)
- Ontology tree showing covered branches
- Recommendations for data collection</p>
<p><strong>Related to</strong>: #40 (original question), #49 (RF training), #55 (NCBI)</p>
<hr />
<h2 id="dependency-graph">Dependency Graph</h2>
<pre><code>Priority order and dependencies:

HIGH (Do first):
  #54 Duplicate handling ─────┐
                              ├──&gt; #49 RF training (existing, update)
  #51 Ontology-aware eval ────┘

MEDIUM-HIGH (After #49):
  #56 k-NN comparison ────────&gt; Needs #49 baseline

MEDIUM (Parallel or after #49):
  #53 Feature importance ─────&gt; Can add to #49 or separate
  #57 ENVO coverage ──────────&gt; Parallel to #49
  #52 Multi-output RF ────────&gt; After #49 baseline

MEDIUM (Later):
  #55 NCBI scaling ───────────&gt; After #49, #54, #57
</code></pre>
<h2 id="implementation-roadmap">Implementation Roadmap</h2>
<h3 id="phase-1-clean-foundation-current-pr-50">Phase 1: Clean Foundation (Current PR #50)</h3>
<ul>
<li>[x] Merge RF notebook with NMDC dataset (#49)</li>
<li>[x] Update dataset path</li>
<li>[ ] Add duplicate handling (#54)</li>
<li>[ ] Expand to all 3 scales (#49)</li>
</ul>
<h3 id="phase-2-enhanced-evaluation">Phase 2: Enhanced Evaluation</h3>
<ul>
<li>[ ] Implement ontology-aware scoring (#51)</li>
<li>[ ] Add k-NN comparison (#56)</li>
<li>[ ] Feature importance analysis (#53)</li>
</ul>
<h3 id="phase-3-advanced-methods">Phase 3: Advanced Methods</h3>
<ul>
<li>[ ] ENVO coverage analysis (#57)</li>
<li>[ ] Multi-output RF (#52)</li>
</ul>
<h3 id="phase-4-production-scale">Phase 4: Production Scale</h3>
<ul>
<li>[ ] NCBI complete training (#55)</li>
<li>[ ] Cross-dataset validation</li>
</ul>
<h2 id="summary-statistics">Summary Statistics</h2>
<p><strong>Total issues created</strong>: 7
- <strong>High priority</strong>: 2 (#54, #51)
- <strong>Medium-high priority</strong>: 1 (#56)
- <strong>Medium priority</strong>: 4 (#52, #53, #55, #57)</p>
<p><strong>Estimated implementation time</strong>:
- #54: 2-4 hours (add to #49)
- #51: 1-2 days (new module + integration)
- #56: 4-8 hours (extract k-NN, compare)
- #53: 2-4 hours (add to #49 notebook)
- #57: 1-2 days (separate analysis notebook)
- #52: 2-3 days (new approaches, evaluation)
- #55: 2-3 days (optimization, cross-validation)</p>
<p><strong>Total</strong>: ~2-3 weeks of focused work (if done sequentially)</p>
<h2 id="open-questions-for-discussion">Open Questions for Discussion</h2>
<ol>
<li><strong>Issue #52 (Multi-output)</strong>: Worth the complexity? Or stick with independent classifiers?</li>
<li><strong>Issue #54 (Duplicates)</strong>: Should we exclude conflicts entirely or try to learn from them?</li>
<li><strong>Issue #55 (NCBI)</strong>: Is NCBI too noisy? Need curation step first?</li>
<li><strong>Issue #51 (Ontology)</strong>: What hierarchy distance scoring makes sense? (1 hop=0.75, 2 hops=0.5?)</li>
<li><strong>Issue #56 (k-NN)</strong>: If k-NN performs well, is RF worth the complexity?</li>
</ol>
<h2 id="next-steps">Next Steps</h2>
<p><strong>Immediate</strong> (add to current PR #50):
1. Address #54 (duplicate handling) in RF notebook
2. Ensure #49 success criteria complete (3 classifiers trained)</p>
<p><strong>Short-term</strong> (next 1-2 weeks):
3. Implement #51 (ontology metrics) - high scientific value
4. Add #56 (k-NN comparison) - validates ML approach
5. Add #53 (feature importance) - easy addition to #49</p>
<p><strong>Medium-term</strong> (next month):
6. Create #57 (ENVO coverage analysis)
7. Experiment with #52 (multi-output RF)
8. Scale to #55 (NCBI complete)</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.tabs.link"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>